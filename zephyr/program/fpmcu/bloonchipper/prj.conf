# Copyright 2023 The ChromiumOS Authors
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

CONFIG_BOARD_BLOONCHIPPER=y

# Hwinfo (used by cros-system driver for STM32)
CONFIG_HWINFO=y

# STM32 flash driver options
CONFIG_FLASH_STM32_READOUT_PROTECTION=y
CONFIG_FLASH_STM32_WRITE_PROTECT=y
CONFIG_FLASH_STM32_BLOCK_REGISTERS=y

# STM32 entropy driver options
CONFIG_ENTROPY_STM32_THR_POOL_SIZE=32
CONFIG_ENTROPY_STM32_THR_THRESHOLD=16

# IWDG watchdog
CONFIG_IWDG_STM32_INITIAL_TIMEOUT=10000
CONFIG_PLATFORM_EC_WATCHDOG_PERIOD_MS=10000
CONFIG_PLATFORM_EC_WATCHDOG_WARNING_LEADING_TIME_MS=3000

# CrOS drivers
CONFIG_CROS_FLASH_READOUT_PROTECTION=y
CONFIG_CROS_SYSTEM_STM32=y

# Priorities
CONFIG_PLATFORM_EC_FLASH_INIT_PRIORITY=60
CONFIG_CROS_SYSTEM_STM32_INIT_PRIORITY=71
CONFIG_PLATFORM_EC_SYSTEM_PRE_INIT_PRIORITY=72

# Host Commands
CONFIG_EC_HOST_CMD_INITIALIZE_AT_BOOT=n
CONFIG_EC_HOST_CMD_HANDLER_TX_BUFFER_SIZE=549
CONFIG_EC_HOST_CMD_HANDLER_RX_BUFFER_SIZE=544
CONFIG_EC_HOST_CMD_BACKEND_SPI=y
CONFIG_EC_HOST_CMD_BACKEND_UART=y
CONFIG_UART_ASYNC_API=y

# Increase IDLE stack for the IDLE timer
CONFIG_IDLE_STACK_SIZE=550
