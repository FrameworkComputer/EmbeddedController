# Copyright 2021 The ChromiumOS Authors
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

CONFIG_BOARD_GOTHRAX=y

# Ensure recovery key combination (esc+refresh+power) is reliable: b/236580049
CONFIG_PLATFORM_EC_KEYBOARD_PWRBTN_ASSERTS_KSI3=y
CONFIG_PLATFORM_EC_KEYBOARD_REFRESH_ROW3=y

# Sensor
CONFIG_PLATFORM_EC_ACCEL_SPOOF_MODE=y

# Sensor drivers
CONFIG_PLATFORM_EC_ACCELGYRO_BMI_COMM_I2C=y
CONFIG_PLATFORM_EC_ACCELGYRO_BMI3XX=y
CONFIG_PLATFORM_EC_ACCEL_BMA4XX=y
CONFIG_PLATFORM_EC_MAX_SENSOR_FREQ_MILLIHZ=100000
CONFIG_PLATFORM_EC_DYNAMIC_MOTION_SENSOR_COUNT=y

# Both ports use a PI5USB2546 smart switch with CTL1..3 fixed high,
# for SDP2 or CDP only.
CONFIG_PLATFORM_EC_USB_PORT_POWER_SMART=y
CONFIG_PLATFORM_EC_USB_PORT_POWER_SMART_CDP_SDP_ONLY=y
CONFIG_PLATFORM_EC_USB_PORT_POWER_SMART_DEFAULT_CDP=y
CONFIG_PLATFORM_EC_USB_PORT_POWER_SMART_INVERTED=y

# Charger driver and configuration
CONFIG_PLATFORM_EC_CHARGER_SM5803=n
CONFIG_PLATFORM_EC_CHARGER_RAA489000=y
CONFIG_PLATFORM_EC_OCPC_DEF_RBATT_MOHMS=22
CONFIG_PLATFORM_EC_RAA489000_AC_PRESENT_CONTROL=y

# TCPC+PPC: ITE on-chip no for C0, PS8745 no for optional C1
CONFIG_PLATFORM_EC_USB_PD_TCPM_DRIVER_IT8XXX2=n
CONFIG_PLATFORM_EC_USB_PD_TCPM_PS8745=n
CONFIG_PLATFORM_EC_USB_PD_VBUS_DETECT_CHARGER=n
# SM5803 controls power path on both ports
CONFIG_PLATFORM_EC_USB_PD_5V_CHARGER_CTRL=n

# TCPC+PPC: both C0 and C1 (if present) are RAA489000
CONFIG_PLATFORM_EC_USB_PD_TCPM_RAA489000=y
CONFIG_PLATFORM_EC_USB_PD_DISCHARGE_TCPC=y
CONFIG_PLATFORM_EC_USB_PD_VBUS_DETECT_TCPC=y
CONFIG_PLATFORM_EC_USB_PD_TCPC_LPM_EXIT_DEBOUNCE_US=100000
# RAA489000 uses TCPCI but not a separate PPC, so custom function is required
CONFIG_PLATFORM_EC_USB_PD_5V_EN_CUSTOM=y

# save RAM, fix `RAM' overflowed by 428 bytes
CONFIG_TASK_PD_INT_STACK_SIZE=2048
CONFIG_PLATFORM_EC_USB_PD_INT_SHARED=y
CONFIG_PLATFORM_EC_USB_PD_PORT_0_SHARED=y
CONFIG_PLATFORM_EC_USB_PD_PORT_1_SHARED=y

# Configure daughter-board
CONFIG_NISSA_SUB_BOARD=n

# Disable powerindebug
CONFIG_PLATFORM_EC_CMD_POWERINDEBUG=n
